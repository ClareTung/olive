## Redis-懒惰删除

### Redis 为什么要懒惰删除(lazy free)？

* 删除指令 del 会直接释放对象的内存，大部分情况下，这个指令非常快，没有明显延 迟。不过如果删除的 key 是一个非常大的对象，比如一个包含了千万元素的 hash，那么删 除操作就会导致单线程卡顿。
* Redis 为了解决这个卡顿问题，在 4.0 版本引入了 unlink 指令，它能对删除操作进行懒 处理，丢给后台线程来异步回收内存。

```
unlink key
```

### flush

* Redis 提供了 flushdb 和 flushall 指令，用来清空数据库，这也是极其缓慢的操作。 Redis 4.0 同样给这两个指令也带来了异步化，在指令后面增加 async 参数

```
flushall async
```

